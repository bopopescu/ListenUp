{"version":3,"sources":["../../src/pages/message-detail/message-detail.module.ts","../../src/pages/message-detail/message-detail.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MessageDetailPage } from './message-detail';\n// import { IonicImageLoader } from 'ionic-image-loader';\n\n\n@NgModule({\n  declarations: [\n    MessageDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MessageDetailPage),\n    // IonicImageLoader\n  ],\n})\nexport class MessageDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/message-detail/message-detail.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\n// Providers\nimport { ChatInfoProvider } from '../../providers/chat-info/chat-info';\nimport { UserInfoProvider } from '../../providers/userInfo/userInfo';\n//import { UserInfo } from '@firebase/auth-types';\n\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport * as firebase from 'firebase';\n\nimport { ActionSheetController } from 'ionic-angular';\nimport {AlertController} from 'ionic-angular';\nimport { Observable } from 'rxjs/Observable';\n\n/**\n * Generated class for the MessageDetailPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-message-detail',\n  templateUrl: 'message-detail.html',\n})\nexport class MessageDetailPage {\n\n  chatID: string;\n  usrID: string;\n  otherID: string;\n  otherData: any;\n  messageText: string;\n  checkboxOpen: any;\n  reasons: any;\n  otherInfo: any;\n  chatData: Observable<any[]>\n\n  constructor(public navCtrl: NavController\n    ,private chatInfo: ChatInfoProvider\n    ,private uInfo: UserInfoProvider\n    , public navParams: NavParams,\n    public alertCtrl: AlertController,\n    private afData: AngularFireDatabase,\n    public sheetCtrl : ActionSheetController) {\n      //Initialize variables\n    this.chatID = this.navParams.get('chatID');\n    console.log(\"chat key\", this.chatID);\n    this.otherID = this.navParams.get('otherID');\n    console.log(\"what is other id\",this.otherID);\n    this.usrID = this.uInfo.getUserInfo().id;\n    //Call functions here\n    this.getOtherInfo()\n    this.loadMessages();\n    this.loadOtherInfo();\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad MessageDetailPage');\n  }\n\n  getOtherInfo(){\n    this.afData.database.ref('users').child(this.otherID).once('value',dataSnap =>{\n      this.otherInfo = dataSnap.val();\n      // if(!this.otherInfo){\n      //   setTimeout(() =>{\n      //     this.otherInfo = dataSnap.val\n      //   })\n      // }\n      console.log(\"other info\",this.otherInfo);\n    })\n  }\n\n  loadMessages(){\n    this.chatData = this.chatInfo.loadMessages(this.chatID);\n\n  }\n\n  loadOtherInfo(){\n    this.uInfo.getOtherUserInfo(this.otherID).subscribe(otherPersonData=> {\n      this.otherData = otherPersonData;\n      console.log(this.otherData);\n    })\n  }\n\n  sendMessage(text){\n    this.chatInfo.addMessage(text, this.usrID, this.otherID, this.chatID);\n    this.messageText = \"\"\n  }\n\n  logChat(chat){\n    console.log(chat.sender)\n    // console.log(this.usrId)\n  }\n reportUser(){\n   let alert = this.alertCtrl.create();\n   alert.addInput({\n     type: \"checkbox\",\n     label: 'Inappropriate Content',\n     value: \"Inappropriate Content\"\n   });\n\n    alert.addInput({\n     type: \"checkbox\",\n     label: 'Harassment',\n     value: \"Harassment\"\n   });\n\n     alert.addInput({\n     type: \"checkbox\",\n     label: 'Threats',\n     value: \"Threats\"\n   });\n\n     alert.addInput({\n     type: \"checkbox\",\n     label: 'Spam',\n     value: \"Spam \"\n   });\n\n     alert.addInput({\n       type: \"text\",\n       label: 'Other',\n       value: \"Other\"\n     })\n   alert.addButton('Cancel');\n\n   alert.addButton({\n     text: 'Ok',\n     handler: data => {\n       console.log(\"Radio\",data);\n       this.checkboxOpen = false;\n       this.reasons = data;\n       var timeStamp =  firebase.database.ServerValue.TIMESTAMP;\n       this.afData.database.ref(\"reports\").push({\n         timestamp: timeStamp,\n         reporterid: this.usrID,\n         offenderid: this.otherID,\n         reasons: data\n       });\n      this.navCtrl.pop()\n     }\n   });\n   alert.present().then(() => {\n     this.checkboxOpen = true;\n   });\n }\n\n\n blockUser(){\n   let alert = this.alertCtrl.create({\n     title: 'Block this User?',\n     message: 'If the blocked user is not annonymous, you can unblock him later by going to your blacklist in the menu',\n     buttons: [\n     {\n       text: 'No',\n       role: 'cancel',\n       handler: () =>{\n         console.log(\"cancel clicked\");\n       }\n     },\n     {\n       text: 'Yes',\n       handler: () =>{\n         console.log(\"blocked user\");\n         var blockedusers = {};\n         blockedusers[this.otherID] = this.otherInfo.username;\n         this.afData.database.ref('users').child(this.usrID).update({blockedusers});\n         this.navCtrl.pop()\n       }\n     }\n     ]\n   });\n   alert.present();\n  }\n\n flagUser(){\n   let actionSheet = this.sheetCtrl.create({\n     title: 'Report or block this user?',\n     buttons: [\n     {\n       text: 'Report',\n       role: 'report',\n       handler: () =>{\n         this.reportUser();\n       }\n     },\n     {\n       text: 'Block',\n       role: 'block',\n       handler: () =>{\n         this.blockUser();\n       }\n     },\n     {\n       text: 'Cancel',\n       role: 'cancel',\n       handler: () => {\n         console.log(\"canceled clicked\");\n       }\n     }\n     ]\n   });\n   actionSheet.present();\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/message-detail/message-detail.ts"],"sourceRoot":""}