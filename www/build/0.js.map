{"version":3,"sources":["../../src/pages/message/message.module.ts","../../src/pages/message/message.ts","../../node_modules/rxjs/add/operator/take.js","../../node_modules/rxjs/operator/take.js","../../node_modules/rxjs/operators/take.js","../../node_modules/rxjs/util/ArgumentOutOfRangeError.js"],"names":[],"mappings":"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SAAS,CAAC,MAAM,CAAC,UAAC,CAAC;YACvC,EAAE,EAAC,CAAC,CAAC,SAAS,CAAC,QAAQ,IAAI,CAAC,CAAC,SAAS,CAAC,KAAK,IAAI,KAAI,CAAC,CAAC,CAAC,EAAC;gBACtD,EAAE,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAE,WAAW,EAAE,CAAC,OAAO,CAAC,KAAI,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC;oBACxE,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,KAAI,CAAC,CAAC,CAAC,WAAW,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAC;oBACpE,MAAM,CAAC,IAAI,CAAC;gBACd,CAAC;gBACD,MAAM,CAAC,KAAK,CAAC;YACb,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;IAED,qCAAe,GAAf;IAEA,CAAC;IApFU,WAAW;QAJvB,wEAAS,CAAC;YACT,QAAQ,EAAE,cAAc;WACG;SAC5B,CAAC;yCAkBkB,OAAa;YAC7B,CAAoC;;YACpB,kFAAgB;YACf,mBAAmB;UACF;;OArBzB,WAAW,CAsFvB;IAAD,CAAC;AAAA;SAtFY,WAAW,e;;;;;;;;AClBxB;AACA;AACA;AACA;AACA,gC;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,SAAS;AACT,SAAS;AACT,SAAS;AACT;AACA,YAAY,wBAAwB;AACpC;AACA;AACA,WAAW,OAAO;AAClB,YAAY,cAAc;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gC;;;;;;;;ACvCA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,SAAS;AACT,SAAS;AACT,SAAS;AACT;AACA,YAAY,wBAAwB;AACpC;AACA;AACA,WAAW,OAAO;AAClB,YAAY,cAAc;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gC;;;;;;;;AC1FA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,SAAS;AACT,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,mD","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MessagePage } from './message';\n// import { IonicImageLoader } from 'ionic-image-loader';\n\n\n@NgModule({\n  declarations: [\n    MessagePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MessagePage),\n    // IonicImageLoader\n  ],\n  exports: [\n      MessagePage\n  ],\n  entryComponents: [\n      MessagePage\n  ]\n})\nexport class MessagePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/message/message.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController } from 'ionic-angular';\nimport { ChatInfoProvider } from '../../providers/chat-info/chat-info';\nimport { UserInfoProvider } from '../../providers/userInfo/userInfo';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/take';\n\n//AngularFire\nimport { AngularFireAuth } from 'angularfire2/auth';\nimport { AngularFireDatabase } from 'angularfire2/database';\n\n//3rd party libraries\n\n@IonicPage()\n@Component({\n  selector: 'page-message',\n  templateUrl: 'message.html'\n})\nexport class MessagePage {\n\n\n  chatArray: any[] = []\n  usrId: string;\n  usrData: any;\n  constArray: any;\n  q: any;\n\n  //Observables\n  chatList$: Observable<any[]>;\n\n  //Subscriptions\n  chatListSubscription: any;\n\n\n  constructor(\n    public navCtrl: NavController\n    //private chatInfo: ChatInfoProvider\n    ,private uInfo: UserInfoProvider\n    ,private afData: AngularFireDatabase\n    //,private afAuth: AngularFireAuth\n  ) {\n    //Initialize variables\n    this.usrId = this.uInfo.getUserInfo().id\n\n    //Call functions here\n    this.loadDMs();\n\n  }\n\n  loadDMs(){\n    this.chatList$ = this.afData.list(`users/${this.usrId}/chats/DMs`).snapshotChanges()\n    this.chatListSubscription = this.chatList$.subscribe(chatArr=> {\n      this.chatArray = chatArr;\n      this.chatArray.forEach(chat=> {\n        let otherID = chat.key\n        this.uInfo.getOtherUserInfo(otherID).take(1).subscribe(otherInfo=> {\n          chat.otherInfo = otherInfo\n        })\n      })\n      console.log(\"cahts are here\",this.chatArray);\n      this.constArray = this.chatArray\n    })\n  }\n\ndeleteChat(chat){\n  var position = null\n  this.afData.database.ref('users').child(this.usrId).child('chats').child('DMs').child(chat.key).remove();\n  for(var i in this.chatArray){\n    if (this.chatArray[i].key == chat.key){\n        position = i;\n    }\n  }\n  this.chatArray.splice(position,1);\n}\n\n  goToChatDetail(chatID: string, otherID: string){\n    this.navCtrl.push(\"MessageDetailPage\", {chatID: chatID, otherID: otherID})\n  }\n\n  searchMessage(searchbar){\n    this.chatArray = this.constArray\n     this.q = searchbar.srcElement.value;\n    console.log('searching...',this.q);\n    if (!this.q) {\n      return};\n\n    if (String(this.q).replace(/\\s/g,\"\").length ==0){\n      return true;\n    }\n    this.chatArray = this.chatArray.filter((v) => {\n      if(v.otherInfo.username && v.otherInfo.email && this.q){\n        if (v.otherInfo.username .toLowerCase().indexOf(this.q.toLowerCase()) > -1 ||\n          v.otherInfo.email.toLowerCase().indexOf(this.q.toLowerCase()) > -1){\n          return true;\n        }\n        return false;\n        }\n    });\n  }\n\n  ionViewDidLeave() {\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/message/message.ts","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar take_1 = require('../../operator/take');\nObservable_1.Observable.prototype.take = take_1.take;\n//# sourceMappingURL=take.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/add/operator/take.js\n// module id = 409\n// module chunks = 0","\"use strict\";\nvar take_1 = require('../operators/take');\n/**\n * Emits only the first `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Takes the first `count` values from the source, then\n * completes.</span>\n *\n * <img src=\"./img/take.png\" width=\"100%\">\n *\n * `take` returns an Observable that emits only the first `count` values emitted\n * by the source Observable. If the source emits fewer than `count` values then\n * all of its values are emitted. After that, it completes, regardless if the\n * source completes.\n *\n * @example <caption>Take the first 5 seconds of an infinite 1-second interval Observable</caption>\n * var interval = Rx.Observable.interval(1000);\n * var five = interval.take(5);\n * five.subscribe(x => console.log(x));\n *\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @throws {ArgumentOutOfRangeError} When using `take(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0`.\n *\n * @param {number} count The maximum number of `next` values to emit.\n * @return {Observable<T>} An Observable that emits only the first `count`\n * values emitted by the source Observable, or all of the values from the source\n * if the source emits fewer than `count` values.\n * @method take\n * @owner Observable\n */\nfunction take(count) {\n    return take_1.take(count)(this);\n}\nexports.take = take;\n//# sourceMappingURL=take.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/operator/take.js\n// module id = 410\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\nvar Subscriber_1 = require('../Subscriber');\nvar ArgumentOutOfRangeError_1 = require('../util/ArgumentOutOfRangeError');\nvar EmptyObservable_1 = require('../observable/EmptyObservable');\n/**\n * Emits only the first `count` values emitted by the source Observable.\n *\n * <span class=\"informal\">Takes the first `count` values from the source, then\n * completes.</span>\n *\n * <img src=\"./img/take.png\" width=\"100%\">\n *\n * `take` returns an Observable that emits only the first `count` values emitted\n * by the source Observable. If the source emits fewer than `count` values then\n * all of its values are emitted. After that, it completes, regardless if the\n * source completes.\n *\n * @example <caption>Take the first 5 seconds of an infinite 1-second interval Observable</caption>\n * var interval = Rx.Observable.interval(1000);\n * var five = interval.take(5);\n * five.subscribe(x => console.log(x));\n *\n * @see {@link takeLast}\n * @see {@link takeUntil}\n * @see {@link takeWhile}\n * @see {@link skip}\n *\n * @throws {ArgumentOutOfRangeError} When using `take(i)`, it delivers an\n * ArgumentOutOrRangeError to the Observer's `error` callback if `i < 0`.\n *\n * @param {number} count The maximum number of `next` values to emit.\n * @return {Observable<T>} An Observable that emits only the first `count`\n * values emitted by the source Observable, or all of the values from the source\n * if the source emits fewer than `count` values.\n * @method take\n * @owner Observable\n */\nfunction take(count) {\n    return function (source) {\n        if (count === 0) {\n            return new EmptyObservable_1.EmptyObservable();\n        }\n        else {\n            return source.lift(new TakeOperator(count));\n        }\n    };\n}\nexports.take = take;\nvar TakeOperator = (function () {\n    function TakeOperator(total) {\n        this.total = total;\n        if (this.total < 0) {\n            throw new ArgumentOutOfRangeError_1.ArgumentOutOfRangeError;\n        }\n    }\n    TakeOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new TakeSubscriber(subscriber, this.total));\n    };\n    return TakeOperator;\n}());\n/**\n * We need this JSDoc comment for affecting ESDoc.\n * @ignore\n * @extends {Ignored}\n */\nvar TakeSubscriber = (function (_super) {\n    __extends(TakeSubscriber, _super);\n    function TakeSubscriber(destination, total) {\n        _super.call(this, destination);\n        this.total = total;\n        this.count = 0;\n    }\n    TakeSubscriber.prototype._next = function (value) {\n        var total = this.total;\n        var count = ++this.count;\n        if (count <= total) {\n            this.destination.next(value);\n            if (count === total) {\n                this.destination.complete();\n                this.unsubscribe();\n            }\n        }\n    };\n    return TakeSubscriber;\n}(Subscriber_1.Subscriber));\n//# sourceMappingURL=take.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/operators/take.js\n// module id = 411\n// module chunks = 0","\"use strict\";\nvar __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n/**\n * An error thrown when an element was queried at a certain index of an\n * Observable, but no such index or position exists in that sequence.\n *\n * @see {@link elementAt}\n * @see {@link take}\n * @see {@link takeLast}\n *\n * @class ArgumentOutOfRangeError\n */\nvar ArgumentOutOfRangeError = (function (_super) {\n    __extends(ArgumentOutOfRangeError, _super);\n    function ArgumentOutOfRangeError() {\n        var err = _super.call(this, 'argument out of range');\n        this.name = err.name = 'ArgumentOutOfRangeError';\n        this.stack = err.stack;\n        this.message = err.message;\n    }\n    return ArgumentOutOfRangeError;\n}(Error));\nexports.ArgumentOutOfRangeError = ArgumentOutOfRangeError;\n//# sourceMappingURL=ArgumentOutOfRangeError.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/util/ArgumentOutOfRangeError.js\n// module id = 412\n// module chunks = 0"],"sourceRoot":""}