{"version":3,"sources":["../../src/pages/profile/profile.module.ts","../../src/pages/profile/profile.ts"],"names":[],"mappings":"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","file":"4.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProfilePage } from './profile';\n//import { BarcodeScanner } from '@ionic-native/barcode-scanner';\n// import { IonicImageLoader } from 'ionic-image-loader';\n\n\n@NgModule({\n  declarations: [\n    ProfilePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ProfilePage),\n    // IonicImageLoader\n  ],\n  exports: [\n      ProfilePage\n  ],\n  entryComponents: [\n      ProfilePage\n  ]\n})\nexport class ProfilePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, AlertController} from 'ionic-angular';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\nimport {UserInfoProvider} from '../../providers/userInfo/userInfo';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { ActionSheetController } from 'ionic-angular';\nimport * as firebase from 'firebase';\nimport {LoginPage} from '../../pages/login/login';\nimport { App,MenuController } from 'ionic-angular';\nimport {AngularFireAuth} from 'angularfire2/auth';\nimport { BarcodeScanner, BarcodeScannerOptions } from '@ionic-native/barcode-scanner';\n\n@IonicPage()\n@Component({\n  selector: 'page-profile',\n  templateUrl: 'profile.html'\n})\nexport class ProfilePage {\n  options: BarcodeScannerOptions;\n  encodText:string='';\n  encodedData:any={};\n  scannedData:any={};\n  firstName: any;\n  lastName: any;\n  userName: any;\n  usrInfo: any;\n  param: any;\n  userPhoto: any;\n  captureDataUrl: string;\n  usrId: any;\n  background: any;\n  receivePho: any;\n  constructor(public navCtrl: NavController,\n    public uInfo: UserInfoProvider,\n    private Camera: Camera,\n    public navParams : NavParams,\n    private afData: AngularFireDatabase,\n    private actSheet: ActionSheetController,\n    private afAuth: AngularFireAuth,\n    private app: App,\n    private alertCtrl: AlertController,public scanner:BarcodeScanner) {\n    this.loadUserInfo();\n    this.background = this.uInfo.getDefault();\n    if(this.background){\n      this.receivePho = this.uInfo.getPhoto();\n    }\n  }\n    scan(){\n      this.options={\n        prompt: 'Scan your Barcode'\n      };\n      this.scanner.scan(this.options).then((data) => {\n        this.scannedData = data;\n\n      }, (err) => {\n        console.log('Error :',err);\n      })\n    }\n    encode(){\n      this.scanner.encode(this.scanner.Encode.TEXT_TYPE, this.usrInfo.id).then((data) => {\n        this.encodedData = data;\n      }, (err) => {\n          console.log('Error :',err);\n      })\n    }\n\n  loadUserInfo(){\n    this.usrInfo = this.uInfo.getUserInfo();\n     if(!this.usrInfo){\n       setTimeout(() => {\n        this.loadUserInfo();\n      },1000);\n    }\n    else{\n    this.firstName = this.usrInfo.firstname;\n    this.lastName = this.usrInfo.lastname;\n    this.userName = this.usrInfo.username;\n    this.userPhoto = this.uInfo.getPhoto();\n    }\n  }\n\n\n  capture(sourcetype){\n  const cameraOptions: CameraOptions = {\n    quality: 50,\n    destinationType: this.Camera.DestinationType.DATA_URL,\n    encodingType: this.Camera.EncodingType.JPEG,\n    mediaType: this.Camera.MediaType.PICTURE,\n    sourceType: sourcetype\n    };\n\n    this.Camera.getPicture(cameraOptions).then((imageData) => {\n      this.captureDataUrl = 'data:image/jpeg;base64,'+ imageData;\n      this.receivePho = this.captureDataUrl;\n      this.upload();\n    }, (err) => {\n\n    });\n  }\n\n  upload() {\n      let storageRef = firebase.storage().ref(); //reference to storage database\n      const imageRef = storageRef.child(`profiles/${this.uInfo.getUserId()}.jpg`);\n      imageRef.putString(this.captureDataUrl,firebase.storage.StringFormat.DATA_URL).then((snapshot)=>{\n      });\n      this.afData.database.ref(\"users\").child(this.usrInfo.id).update({\n        photourl: this.captureDataUrl\n      });\n    }\n\n\nsetPhoto(){\n  var actSheet = this.actSheet.create({\n    title: 'Choose a Photo Option',\n    buttons: [\n    {\n      text: 'Gallery',\n      role: 'upload',\n      handler: () => {\n        console.log(\"uploading photo clicked\");\n        this.capture(0);\n      }\n    },\n    {\n      text: 'Camera',\n      role: 'take',\n      handler : () => {\n        console.log(\"clicked take photo\");\n        this.capture(1);\n      }\n    },\n    {\n      text: 'Cancel',\n      role: 'cancel',\n      handler: () => {\n        console.log(\"cancel clicked\");\n      }\n    }\n    ]\n  });\n  actSheet.present();\n}\n\ntoFeedback(){\n  this.navCtrl.push(\"SearchuserPage\")\n}\n\n\nlogoutClicked(){\n  var alertCtrl = this.alertCtrl.create({\n    title: 'Are you sure you want to log out?',\n    buttons:[{\n      text: \"Logout\",\n      role: \"Logout\",\n      handler: () => {\n          console.log('Logout...')\n          this.afAuth.auth.signOut();\n          this.uInfo.clearUserInfo();\n          var nav = this.app.getRootNav();\n          nav.setRoot(LoginPage);\n      }\n    },\n    {\n      text: \"Cancel\",\n      role: \"cancel\"\n    }\n    ]});\n  alertCtrl.present();\n}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile/profile.ts"],"sourceRoot":""}